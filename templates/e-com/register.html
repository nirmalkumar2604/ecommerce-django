{% extends "e-com/base.html" %}
{% block title %}Register | NK Mart{% endblock %}

{% block content %}
<div class="login-container">
  <div class="login-card">
    <h2 class="login-title">Create Your Account üõçÔ∏è</h2>
    <p class="login-subtitle">Join NK Mart and start shopping today!</p>

    <form id="registerForm" class="login-form">
      <input type="text" id="username" placeholder="Choose a username" required />
      <input type="email" id="email" placeholder="Enter your email" required />
      <input type="password" id="password" placeholder="Enter password" required />
      <input type="password" id="password2" placeholder="Confirm password" required />
      <button type="submit">Register</button>
    </form>

    <div class="login-links">
      <a href="/ui/login/">Already have an account? Login</a>
    </div>
  </div>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", async function (e) {
  e.preventDefault();
  const username = document.getElementById("username").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const password2 = document.getElementById("password2").value;

  const res = await fetch("/api/register/", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username, email, password, password2 }),
  });

  const data = await res.json();
  if (res.ok) {
    alert("üéâ Registration successful! Please login.");
    window.location.href = "/ui/login/";
  } else {
    alert("‚ùå " + (data.error || "Something went wrong"));
  }
});
</script>
{% endblock %}
