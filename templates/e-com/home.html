{% extends "e-com/base.html" %}
{% block title %}Home | NK Mart{% endblock %}

{% block content %}
<section class="hero">
  <div class="hero-content">
    <h1>Welcome to <span>NK Mart</span> üõçÔ∏è</h1>
    <p>Your one-stop shop for the best deals on electronics, fashion, and more.</p>
    <a href="/ui/product_list/" class="hero-btn">Shop Now</a>
  </div>
</section>

<section class="categories">
  <h2 class="section-title">Featured Categories</h2>
  <div class="category-grid">
    <div class="category-card"><img src="https://via.placeholder.com/200?text=Electronics" alt="Electronics" /><p>Electronics</p></div>
    <div class="category-card"><img src="https://via.placeholder.com/200?text=Fashion" alt="Fashion" /><p>Fashion</p></div>
    <div class="category-card"><img src="https://via.placeholder.com/200?text=Home+Essentials" alt="Home" /><p>Home Essentials</p></div>
    <div class="category-card"><img src="https://via.placeholder.com/200?text=Beauty" alt="Beauty" /><p>Beauty & Care</p></div>
  </div>
</section>

<section class="trending">
  <h2 class="section-title">üî• Trending Products</h2>
  <div id="trendingGrid" class="product-grid"></div>
</section>

<script>
async function loadTrending() {
  const res = await fetch("/api/view_all_products/");
  const data = await res.json();
  const grid = document.getElementById("trendingGrid");
  grid.innerHTML = "";

  if (res.ok && data.products && data.products.length > 0) {
    data.products.slice(0, 4).forEach((p) => {
      const card = document.createElement("div");
      card.classList.add("product-card");
      card.innerHTML = `
        <img src="${p.image || 'https://via.placeholder.com/200'}" alt="${p.name}" />
        <h3>${p.name}</h3>
        <p class="description">${p.description}</p>
        <p class="price">‚Çπ${p.price}</p>
        <button onclick="window.location.href='/ui/product_list/'">View Product</button>
      `;
      grid.appendChild(card);
    });
  } else {
    grid.innerHTML = "<p class='no-products'>No products available right now.</p>";
  }
}
loadTrending();
</script>
{% endblock %}
